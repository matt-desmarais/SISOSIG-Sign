# SISOSIG Inky Display

A Raspberry Pi + Pimoroni Inky eâ€‘paper display project that shows live SISOSIG / MassDOT traffic imagery in a clean, applianceâ€‘style way.

This project is designed to be **robust**, **handsâ€‘off**, and **museum / counter / wallâ€‘display safe**:

---

## âœ¨ Features

* Displays MassDOT traffic images on an Inky display
* Automatically scales images to screen width
* Clean footer area for logo placement (optional)
* Gracefully handles network outages
* Retries automatically when connectivity returns
* Designed for longâ€‘running unattended operation

---

## ğŸ§± Architecture

**Key principle:** *Let systemd do the hard work.*

* Python script only renders images
* systemd controls:

  * startup order
  * Internet availability checks
  * retries and restarts

---

## ğŸ“‚ Files

```
slideshow.py           # Main display program
sisosig-inky.service   # systemd unit
README.md              # This file
```

---

## ğŸ–¥ Hardware

* Raspberry Pi (Zero 2 W, 3, or 4 recommended)
* Pimoroni Inky display (auto-detected)
* Wiâ€‘Fi connection

---

## ğŸ Python Environment

This project assumes Pimoroni's virtual environment:

```
~/.virtualenvs/pimoroni
```

Install dependencies:

```bash
source ~/.virtualenvs/pimoroni/bin/activate
pip install pillow requests inky
```

---

## â–¶ï¸ Running Manually (for testing)

```bash
source ~/.virtualenvs/pimoroni/bin/activate
python slideshow.py
```

---

## âš™ï¸ systemd Service

### `/etc/systemd/system/sisosig-inky.service`

```ini
[Unit]
Description=SISOSIG Inky Display
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
User=pi
WorkingDirectory=/home/pi

# Wait up to 90 seconds for real Internet
ExecStartPre=/bin/bash -c '\
  for i in {1..30}; do \
    ping -c1 -W1 8.8.8.8 >/dev/null && exit 0; \
    sleep 3; \
  done; \
  exit 1'

ExecStart=/home/pi/.virtualenvs/pimoroni/bin/python3 /home/pi/slideshow.py

Restart=always
RestartSec=10
Environment=PYTHONUNBUFFERED=1

[Install]
WantedBy=multi-user.target
```

### Enable & Start

```bash
sudo systemctl daemon-reload
sudo systemctl enable sisosig-inky.service
sudo systemctl start sisosig-inky.service
```

---

## ğŸŒ Internet Handling

* The service **will not start** without real Internet access
* Uses ICMP ping to `8.8.8.8`
* Retries automatically until connectivity exists
* If Internet drops later:

  * program exits
  * systemd restarts when possible

This prevents partial or corrupted images from being shown.

---

## ğŸ§ª Testing Network Failure

### Disable Internet

```bash
sudo ip route del default
sudo systemctl restart sisosig-inky.service
```

Expected behavior:

* Service fails
* Retries quietly
* Display remains unchanged

### Restore Internet

```bash
sudo dhclient wlan0
```

Within ~10 seconds:

* Service starts
* Display updates

---

## ğŸ“œ Logs

```bash
journalctl -u sisosig-inky.service -f
```

---

## ğŸ§© Known Good Uses

* Wall display
* Traffic awareness
* Museum / gallery installations
* Alwaysâ€‘on eâ€‘paper signage
* Cape Businesses

---

## ğŸ“„ License
MIT 
---

## ğŸ™Œ Credits

Built for **SISOSIG.info** using:

* Pimoroni Inky 7.3"
* MassDOT imagery generated by SISOSIG

Minimal. Reliable. Boring (in the best way).
